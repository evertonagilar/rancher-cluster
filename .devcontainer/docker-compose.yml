
services:
  control:
    build:
      context: .
      dockerfile: control.Dockerfile
    volumes:
      - ..:/workspaces/rancher-cluster:cached
    networks:
      - cluster-net

  node-01:
    build:
      context: .
      dockerfile: node.Dockerfile
    hostname: node-01
    networks:
      - cluster-net
    privileged: true

  node-02:
    build:
      context: .
      dockerfile: node.Dockerfile
    hostname: node-02
    networks:
      - cluster-net
    privileged: true

  node-03:
    build:
      context: .
      dockerfile: node.Dockerfile
    hostname: node-03
    networks:
      - cluster-net
    privileged: true

  node-04:
    build:
      context: .
      dockerfile: node.Dockerfile
    hostname: node-04
    networks:
      - cluster-net
    privileged: true

  rancher-server:
    build:
      context: .
      dockerfile: node.Dockerfile
    hostname: rancher-server
    networks:
      - cluster-net
    privileged: true

networks:
  cluster-net:
    driver: bridge
